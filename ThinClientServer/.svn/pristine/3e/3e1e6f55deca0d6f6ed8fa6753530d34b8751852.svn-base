create or replace 
PROCEDURE TCH_BANK_INFO(
  I_TERMINAL_SERIAL_NUMBER VARCHAR2
, O_BYTE_RANGE OUT VARCHAR2
, O_SQL_CODE OUT VARCHAR2
, O_APP_ERROR_CODE OUT VARCHAR2
, O_DEBUG_POINT OUT VARCHAR2 
, C_BANK_INFO OUT SYS_REFCURSOR
)
AS 
V_COUNT NUMBER(4):=NULL;
V_BANK_NAME VARCHAR2(10):=NULL;
BEGIN
  
  O_DEBUG_POINT :='1';
  
    SELECT COUNT(1) INTO V_COUNT FROM TC_ME_PARAMETER TMP JOIN TC_TID_HWSR_MAPPING THM ON TMP.MID = THM.MID 
    WHERE THM.HWSRNO = I_TERMINAL_SERIAL_NUMBER ;
    IF V_COUNT = 0 THEN
      O_DEBUG_POINT:='2';
      RAISE_APPLICATION_ERROR('-21333','NO MAPPING FOUND');
    ELSE
      SELECT DISTINCT THM.BANKCODE INTO V_BANK_NAME FROM TC_ME_PARAMETER TMP JOIN TC_TID_HWSR_MAPPING THM ON TMP.MID = THM.MID 
      WHERE THM.HWSRNO = I_TERMINAL_SERIAL_NUMBER;
    END IF;
  
  OPEN C_BANK_INFO FOR
    SELECT * FROM TCH_BANK_MASTER WHERE B_BANKCODE = V_BANK_NAME;
    
  O_BYTE_RANGE:='700';
  
  
    
END TCH_BANK_INFO;